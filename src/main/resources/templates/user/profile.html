<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns="http://www.w3.org/1999/html">
<head th:replace="partials/fragments :: head('Profile')">
</head>
<body>
<nav th:replace="partials/fragments :: navbar"></nav>
<div class="main main-profile">
    <div id="profile" class="container main-profile">
        <!--Default Image-->
        <div class="profile-div" th:if="${user.getImg() == null}">

            <div class="p_img">
                <img th:src="@{~/img/default_img.jpeg}" class="profile-img" alt="wow">
            </div>
            <!--           Profile Username-->
            <div class="flex align-items-start">
                <h5 class="text-dark text-center" th:text="${user.getUsername()}"></h5>
                <h6 th:text="${user.getEmail()}"></h6>
                <a class="btn btn-outline-dark" id="defaultEdit" href="/update/user">Edit profile</a>
            </div>

        </div>

        <!--Uploaded image-->
        <div class="profile-div" th:if="${user.getImg() != null}">

            <div class="p_img">
                <img th:src="${user.img}" class="profile-img" alt="wow">
            </div>
            <!--            Profile Username-->
            <div class="flex align-items-start">
                <h5 class="text-dark text-center" th:text="${user.getUsername()}"></h5>
                <h6 th:text="${user.getEmail()}"></h6>
                <a class="btn btn-outline-dark" id="uploadEdit" href="/update/user">Edit profile</a>
            </div>

        </div>

<!--        Certs and Roadmaps-->
        <div id="certs-maps">
           <div class="certs text-center">
               <h3>Certifications <i class="fa-solid fa-award"></i></h3>
               <h5>You have <span th:text="${certs.size()}"></span> certs</h5>


                   <p class="" style="display: inline-block"><a
                           class="btn btn-outline-dark link-certs " href="/search/certification">Add a
                       certification</a>|<a class="btn btn-outline-dark link-certs "
                                            href="/certifications">Certifications</a>
                   </p>
           </div>
           <div class="roadmap-profile">

               <h2>Most Recent Roadmap</h2>
               <div th:if="${roadmap == null}">
                   <div class="text-center">
                       <a href="/create/roadmaps" id="newRoadmapLink"><i class="fa-solid fa-plus fa-2xl"></i></a>
                   </div>
                   <div id="chart">
                   </div>
               </div>
               <div th:if="${roadmap != null}"
                    class="card text-center mx-auto shadow-lg p-3 bg-white rounded myProgress">
                   <div>
                       <a id="industryLink" th:href="@{/roadmaps/{id}(id=${roadmap.getId()})}">
                           <h5><span th:text="${roadmap.getCareer().toUpperCase()}"></span></h5>
                       </a>
                       <ul>
                           <li> You are <span id="progress-bar" th:text="${roadmap.getProgress()}"></span>% Complete!
                           </li>

                       </ul>
                   </div>

<!--                   <div class="casing progress">-->
<!--                       <div class="progress red-bar" style="height: 100px">-->
<!--                           <div class="progress-bar progress-bar-striped bg-danger" role="progressbar"-->
<!--                                aria-label="Danger striped example"-->
<!--                                style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">-->
<!--                           </div>-->
<!--                       </div>-->
<!--                   </div>-->
               </div>

           </div>
       </div>
    </div>



    <nav th:replace="partials/fragments :: page-bottom"></nav>


</div>


<!--THIS FORM IS BEING SENT THROUGH FILESTACK.JS-->
<form class="myForm" th:action="@{/profile}" method="post">
    <input name="_csrf" type="hidden" th:each="cookie: ${#httpServletRequest.cookies}"
           th:if="${cookie.name == 'Idea-4c161dd1'} " th:value="${cookie.value}">
</form>
<!--<script th:src="@{~/static/js/roadmap.js}"></script>-->
<script th:inline="javascript">
    const FILESTACK_API_KEY = /*[[${FILESTACK_API_KEY}]]*/ "test";
    console.log(FILESTACK_API_KEY);

    document.querySelector(".main-profile").style.backgroundImage = "url('/img/profile2.jpg')";



    //     let options = {
    //     chart: {
    //     height: 280,
    //     type: "radialBar",
    // },
    //
    //     series: [67],
    //     colors: ["#20E647"],
    //     plotOptions: {
    //     radialBar: {
    //     hollow: {
    //     margin: 0,
    //     size: "70%",
    //     background: "#293450"
    // },
    //     track: {
    //     dropShadow: {
    //     enabled: true,
    //     top: 2,
    //     left: 0,
    //     blur: 4,
    //     opacity: 0.15
    // }
    // },
    //     dataLabels: {
    //     name: {
    //     offsetY: -10,
    //     color: "#fff",
    //     fontSize: "13px"
    // },
    //     value: {
    //     color: "#fff",
    //     fontSize: "30px",
    //     show: true
    // }
    // }
    // }
    // },
    //     fill: {
    //     type: "gradient",
    //     gradient: {
    //     shade: "dark",
    //     type: "vertical",
    //     gradientToColors: ["#87D4F9"],
    //     stops: [0, 100]
    // }
    // },
    //     stroke: {
    //     lineCap: "round"
    // },
    //     labels: ["Progress"]
    // };
    //
    //     let chart = new ApexCharts(document.querySelector("#chart"), options);
    //
    //     chart.render();

</script>
<div th:replace="partials/fragments :: filestack"></div>
<script th:replace="partials/fragments :: convert-name"></script>





<footer th:replace="partials/fragments :: footer"></footer>
<script th:replace="partials/fragments :: jobs"></script>
<script th:replace="partials/fragments :: progress-bar"></script>


</body>
</html>